doctype 5
html
  head
    meta(charset="utf-8")
    meta(name="generator", content="jingo")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title= title
    link(rel="stylesheet", href="/vendor/bootstrap/css/bootstrap.min.css")
    link(rel="stylesheet", href="/vendor/bootstrap/css/bootstrap-responsive.min.css")
    link(rel="stylesheet", href="//fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Condensed")
    link(rel="stylesheet", href="/css/style.css")
    link(rel="stylesheet", href="/css/template.css")
    link(rel="stylesheet", href="/vendor/jquery.tocify.css")
    link(rel="stylesheet", href="/css/shCoreDefault.css")
    block styles
    if hasCustomStyle()
      style.
        !{_style}
  body
    -var term_ph = (typeof term == "undefined" ? "" : term)
    .navbar.navbar-inverse.navbar-fixed-top
      .navbar-inner
        .container
          a(href="/").brand #{appTitle}
          .nav-collapse.collapse
            if canSearch()
              form(action="/search").navbar-search.pull-left
                input(type="text",name="term",placeholder="Search", value="#{term_ph}").search-query
            if isAnonymous()
              p.user You're not 
                a(href='/login', title='Access login page') logged in
            else
              p.user
                if user.email
                  img(src=gravatar().url("#{user.email}", {s:24}))
                b &nbsp;#{user.displayName}&nbsp;
                a(href='/logout', title='Become anonymous') [Logout]

    .container-fluid
      .row.page-actions-row
        block page-actions

      .row-fluid
        div(style="position: fixed").span2 
          #toc.toc
            h3 Contents
          .sidebar.toc.tocify
            !{_sidebar}
        
        #main.hide-tools.span10.pull-right.markdown-body
          block content

      if hasFooter()
        .row.span12 !{_footer}

    script(src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js")
    script(src="/vendor/plantUml.js")
    script.
      window.jQuery || document.write("<sc" + "ript src='/vendor/jquery.min.js'></scr" + "ipt>");
    script(src="/vendor/bootstrap/js/bootstrap.min.js")
    script(src="/js/app.js")
    script(src="/vendor/jquery-ui-1.10.3.custom.min.js")
    script(src="/vendor/jquery.tocify.min.js")
    script.
      Jingo.init();
      $(function() {
         $('#toc').tocify({context:'#content', selectors:'h2, h3, h4'});
      });
    block scripts
    if hasCustomScript()
      script.
        !{_script}
